import{aS as e,aT as z,aU as $,aV as P,bh as I,aG as v,r as p,bg as L,ba as a,bj as O,a$ as H,bn as N,bp as C,bX as B,bv as F,d0 as U,d1 as M,d2 as x,d3 as w,bs as _,bq as W,br as T,bm as V,cN as X,bG as Y,bb as J,b$ as K}from"./vendor.5ff35c24.js";import{a as k}from"./vendor_axios.5abceb0c.js";import{M as Q}from"./index.cb0640cd.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_react_epic_spinners.792a5510.js";import"./vendor_mui_datatables.34fc80b0.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_easy_edit.886afc3d.js";import"./vendor_react_player.223b9460.js";const Z=({handleOpen:i,disabled:d})=>e(z,{title:"Admission stage",children:e($,{disabled:d,onClick:i,children:e(P,{})})}),ee="https://join.navgurukul.org/api/",te=i=>{const{value:d,setRefresh:h}=i,{privileges:m}=I(s=>s.auth),[f,o]=v.useState(!1),[r,u]=p.exports.useState(""),[c,n]=p.exports.useState(""),{enqueueSnackbar:g}=L(),y=()=>o(!1),S=()=>o(!0),b=async()=>{if(c&&r){let s={};c&&(s.stageName=c),r&&(s.stageType=r);const D=`${ee}stage/update/${d}`;await k.put(D,s).then(R=>{h(!0),y(),g("School stage Edited successfully!",{variant:"success"})}).catch(()=>{g("Error in Editing School",{variant:"error"})})}};return a(O,{children:[e($,{disabled:!m.some(s=>s.privilege==="UpdatePartner"),onClick:S,children:e(H,{})}),e(N,{scroll:"paper",open:f,onClose:y,children:e(C,{dividers:!0,children:a("section",{style:{padding:"0rem 1rem 1rem 1rem"},children:[a(C,{children:[a("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("p",{style:{fontSize:"24px"},children:"Edit Admission Stage"}),e(B,{style:{cursor:"pointer"},onClick:()=>o(!1)})]}),a(F,{children:[e(U,{children:"Stage Type"}),a(M,{row:!0,onChange:s=>{u(s.target.value)},children:[e(x,{value:"Test",control:e(w,{}),label:"Test"}),e(x,{value:"Interview",control:e(w,{}),label:"Interview"})]})]}),e(_,{style:{marginTop:"1rem"},fullWidth:!0,autoFocus:!0,label:"Stage Name",placeholder:"Enter Stage",variant:"outlined",sx:{mt:"0.4rem"},value:c,onChange:s=>{n(s.target.value)}})]}),e(W,{style:{display:"flex",justifyContent:"center"},children:e(T,{variant:"contained",color:"primary",style:{width:"94%",padding:".5rem"},onClick:b,children:"Add Admission Stage"})})]})})})]})},ae="https://join.navgurukul.org/api/",se=i=>{const{value:d,setRefresh:h}=i,{privileges:m}=I(n=>n.auth),[f,o]=v.useState(!1),r=()=>o(!1),u=()=>o(!0),c=async()=>{const n=`${ae}stage/${d}`;await k.delete(n),h(!0),r()};return a(O,{children:[e($,{disabled:!m.some(n=>n.privilege==="UpdatePartner"),onClick:u,children:e(V,{})}),e(N,{scroll:"paper",open:f,onClose:r,children:a(C,{children:[e(X,{children:" Are you sure you want to delete this Stage?"}),a("div",{style:{display:"flex",justifyContent:"space-evenly",marginTop:"1rem"},children:[e(T,{variant:"contained",disableElevation:!0,onClick:c,children:"Yes"}),e(T,{variant:"contained",disableElevation:!0,onClick:r,children:"NO"})]})]})})]})},j="https://join.navgurukul.org/api/",he=()=>{var E;const[i,d]=p.exports.useState([]),[h,m]=v.useState(!0),[f,o]=p.exports.useState(!1),[r,u]=p.exports.useState(!1),c=[{name:"id",label:"S.No",options:{filter:!0,sort:!0,customBodyRender:(t,l)=>l.rowIndex+1}},{name:"stageType",label:"Type",options:{filter:!0,sort:!0,customBodyRender:(t,l)=>t}},{name:"stageName",label:"Stage Name",options:{filter:!0,sort:!0,customBodyRender:(t,l)=>t}},{name:"id",label:"Edit",options:{filter:!0,sort:!0,customBodyRender:t=>e(te,{setRefresh:u,value:t})}},{name:"stageName",label:"Manage Transitions",options:{filter:!0,sort:!0,customBodyRender:(t,l)=>{const A=l.rowData[0],G=`/school/${S}/manage-transitions/${A}`;return e(K,{to:G,style:{color:"#f05f40"},children:"Manage Transitions"})}}},{name:"id",label:"Delete",options:{filter:!0,sort:!0,customBodyRender:t=>e(se,{setRefresh:u,value:t})}}],[n,g]=p.exports.useState("");let y=Y(),S=y.pathname.split("/")[2];const{enqueueSnackbar:b}=L(),s=async()=>{let t=`${j}stage/${S}`,l=await k.get(t);d(l.data),m(!1),o(!1)},D=async()=>{if(n.stageType&&n.stageName){y.pathname.split("/")[2];const t=`${j}stage`;await k.post(t,n).then(l=>{g(""),s(),o(!1),b("School stage successfully Added!",{variant:"success"})}).catch(l=>{b("Error in updating School stage",{variant:"error"})})}},R=()=>{o(!0)};p.exports.useEffect(async()=>{(async()=>(await s(),u(!1)))()},[r]);const q={selectableRows:"none",responsive:"vertical",filter:!1,customToolbar:v.useCallback(()=>e(Z,{handleOpen:R}),[])};return a(J,{maxWidth:"md",children:[e(Q,{title:((E=i[0])==null?void 0:E.name)||"Admission stage",columns:c,data:i,showLoader:h,options:q}),e(N,{fullWidth:!0,open:f,onClose:()=>o(!1),children:a("section",{style:{padding:"0rem 1rem 1rem 1rem"},children:[a(C,{children:[a("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("p",{style:{fontSize:"24px"},children:"Admission Stage"}),e(B,{style:{cursor:"pointer"},onClick:()=>o(!1)})]}),a(F,{children:[e(U,{children:"Stage Type"}),a(M,{row:!0,onChange:t=>{g({...n,stageType:t.target.value,school_id:S})},children:[e(x,{value:"Test",control:e(w,{}),label:"Test"}),e(x,{value:"Interview",control:e(w,{}),label:"Interview"})]})]}),e(_,{style:{marginTop:"1rem"},fullWidth:!0,autoFocus:!0,label:"Stage Name",placeholder:"Enter Stage",variant:"outlined",sx:{mt:"0.4rem"},onChange:t=>{g({...n,stageName:t.target.value})}})]}),e(W,{style:{display:"flex",justifyContent:"center"},children:e(T,{variant:"contained",color:"primary",style:{width:"94%",padding:".5rem"},onClick:D,children:"Add Admission Stage"})})]})})]})};export{he as default};

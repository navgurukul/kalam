import{aS as e,aT as T,aU as k,aV as A,bh as I,aG as d,r as m,ba as p,bb as U,bn as W,bp as $,bX as j,bs as b,br as B,b$ as F}from"./vendor.5ff35c24.js";import{a as g}from"./vendor_axios.5abceb0c.js";import{M as E}from"./index.cb0640cd.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_react_epic_spinners.792a5510.js";import"./vendor_mui_datatables.34fc80b0.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_easy_edit.886afc3d.js";import"./vendor_react_player.223b9460.js";const M=({handleOpen:s,disabled:a})=>e(T,{title:"Add new campuses",children:e(k,{disabled:a,onClick:s,children:e(A,{})})}),x="https://join.navgurukul.org/api/",O=[{name:"id",label:"S.No",options:{filter:!0,sort:!0,customBodyRender:(s,a)=>a.rowIndex+1}},{name:"campus",label:"Name",options:{filter:!0,sort:!0,customBodyRender:(s,a)=>{const r=a.rowData[0],i=s==="All"?"/campus/allcampus/":`/campus/${r}/students`;return e(F,{to:i,style:{color:"#f05f40"},children:s})}}}],Q=()=>{const{loggedInUser:s,roles:a}=I(t=>t.auth),[r,i]=d.useState([]),[y,w]=d.useState(!0),[v,l]=m.exports.useState(!1),[n,c]=m.exports.useState({campus:"",address:""}),D=async()=>{if(n.campus&&n.address){const t=`${x}campus`;await g.post(t,n),c(""),f(),l(!1)}},L=()=>{l(!0)},S={selectableRows:"none",responsive:"vertical",filter:!1,customToolbar:d.useCallback(()=>e(M,{handleOpen:L}),[])},f=async()=>{var t;try{const h=a.findIndex(o=>o.role==="Admin"),u=a.find(o=>o.role==="Campus"),N=((t=u==null?void 0:u.access)==null?void 0:t.map(o=>o.access))||[],R=`${x}campus`,C=await g.get(R);i(h!==-1?[...C.data.data,{campus:"All"}]:[...C.data.data.filter(o=>N.includes(o.id))]),w(!1)}catch{}};return m.exports.useEffect(()=>{(async()=>await f())()},[s]),p(U,{maxWidth:"sm",children:[e(E,{title:"Campuses Name",columns:O,data:r,showLoader:y,options:S}),e(W,{fullWidth:!0,open:v,onClose:()=>l(!1),children:e("section",{style:{padding:"0rem 1rem 1rem 1rem"},children:p($,{children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("p",{style:{fontSize:"24px"},children:"New Campus Details"}),e(j,{style:{cursor:"pointer"},onClick:()=>l(!1)})]}),e(b,{fullWidth:!0,autoFocus:!0,label:"Campus Name",placeholder:"Enter Campus",variant:"outlined",sx:{mt:"0.4rem"},onChange:t=>{c({...n,campus:t.target.value})}}),e(b,{style:{marginTop:"2rem"},fullWidth:!0,autoFocus:!0,label:"Address",placeholder:"Write address",variant:"outlined",sx:{mt:"0.4rem"},onChange:t=>{c({...n,address:t.target.value})}}),e(B,{variant:"contained",color:"primary",style:{width:"100%",padding:"0.7rem",marginTop:"2rem"},onClick:D,children:"Add New Campus"})]})})})]})};export{Q as default};

import{bH as M,bh as g,bi as V,aG as l,r as v,aS as t,ba as $,bj as j}from"./vendor.5ff35c24.js";import{a as k}from"./vendor_axios.5abceb0c.js";import{S as B,n as L,c as O}from"./index.6e13cccf.js";import{S as A,D as T}from"./collapseData.bc750d96.js";import{P as H,S as J}from"./PieRechartReport.2a3b7597.js";import{E as N,R as q,O as h}from"./FlagModal.27563f08.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_react_epic_spinners.792a5510.js";import"./vendor_mui_datatables.34fc80b0.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_easy_edit.886afc3d.js";import"./vendor_react_player.223b9460.js";import"./vendor_devextreme.61fe39fc.js";const z="https://join.navgurukul.org/api/",ca=()=>{var m;const{campusId:r}=M(),{loggedInUser:f,roles:p}=g(a=>a.auth),{privileges:i}=g(a=>a.auth),w=V(),b=()=>w(O(!1)),[c,u]=l.useState(0),[D,S]=v.exports.useState([]),C=async()=>{var a;try{const e=p.findIndex(o=>o.role==="Admin"),s=p.find(o=>o.role==="Campus"),n=((a=s==null?void 0:s.access)==null?void 0:a.map(o=>o.access))||[],U=`${z}campus`,d=(await k.get(U)).data.data;S(e!==-1?[...d,{campus:"All"}]:[...d.filter(o=>n.includes(o.id))])}catch(e){console.error("Error fetching campus data:",e)}finally{b()}};v.exports.useEffect(()=>{(async()=>await C())()},[f]);const y=(m=D.find(a=>a.id===parseInt(r,10)))==null?void 0:m.campus,R={name:"evaluation",label:"Evaluation",options:{filter:!1,sort:!0,display:i.some(a=>a.privilege==="UpdateStudentEvaluation"),viewColumns:i.some(a=>a.privilege==="UpdateStudentEvaluation"),customBodyRender:l.useCallback((a,e,s)=>t(N,{rowMetatable:e,evaluation:a,change:n=>s(n)}),[])}},F={label:"Flag",name:"redflag",options:{filter:!0,filterType:"dropdown",display:i.some(a=>a.privilege==="ViewFlag"),viewColumns:i.some(a=>a.privilege==="ViewFlag"),customBodyRender:l.useCallback((a,e,s)=>t(q,{rowMetaTable:e,studentId:e.rowData[0],comment:a,change:n=>s(n)}),[])}},E=()=>{u(0)},x=()=>{u(1)},I=()=>{u(2)},G=()=>{u(3)},P=a=>{switch(a){case 0:return t(h,{});case 1:return t(T,{isCampus:!0,displayData:[...B.CampusData,R,F,L],url:`campus/${r}/students`,campusID:r});case 2:return t(J,{url:`campus/${r}`});case 3:return t(H,{url:`/campus/${r}/students/distribution`});default:return t(h,{})}};return $(j,{children:[t(A,{name:`${y} Campus`,overview:{label:"Overview",action:E},progressMade:{label:"Progress Made",action:I},studentData:{label:"Student Data",action:x},showGraphData:{label:"Graph on Job",action:G},selected:c===0?"overview":c===1?"studentData":c===2?"progressMade":"showGraphData"}),P(c)]})};export{ca as default};

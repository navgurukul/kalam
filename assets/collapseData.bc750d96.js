import{bG as se,bh as le,bi as ie,aG as w,r as oe,aS as a,bu as g,bw as L,ba as i,be as re,cC as j,cD as M,cE as P,bs as N,bD as Y,b9 as ce,bb as de,bc as S,d5 as ue,br as x,d6 as _,d7 as me,aU as pe,d8 as he,d9 as fe,da as ge}from"./vendor.5ff35c24.js";import"./vendor_mui_datatables.34fc80b0.js";import{a as be}from"./vendor_axios.5abceb0c.js";import{a as ye,b as D,M as Se,d as Ce,e as xe,q as ve,c as Fe,f as we,g as B,h as De,i as Ie,j as Te,k as Ae,l as Oe,m as ke}from"./index.6e13cccf.js";const z=Object.entries(ye).map(([t,n])=>({value:t,label:n})),E=Object.entries(D).map(([t,n])=>({value:t,label:n})),Le="https://join.navgurukul.org/api/",je=[{label:"English Interview Pending (2nd Round)",name:"pendingEnglishInterview",options:{viewColumns:!1,display:!1,filter:!1}},{label:"English Interview Failed",name:"englishInterviewFail",options:{viewColumns:!1,display:!1,filter:!1}},{label:"Algebra Interview Pending (3rd Round)",name:"pendingAlgebraInterview",options:{viewColumns:!1,display:!1,filter:!1}},{label:"Algebra Interview Failed",name:"algebraInterviewFail",options:{viewColumns:!1,display:!1,filter:!1}},{label:"Culture Fit Interview Pending (4th Round)",name:"pendingCultureFitInterview",options:{viewColumns:!1,display:!1,filter:!1}},{label:"Culture Interview Failed",name:"cultureFitInterviewFail",options:{viewColumns:!1,display:!1,filter:!1}},{label:"Selected",name:"selected",options:{viewColumns:!1,display:!1,filter:!1}},{label:"Offer Letter Sent",name:"offerLetterSent",options:{viewColumns:!1,display:!1,filter:!1}},{label:"Unreachable",name:"notReachable",options:{viewColumns:!1,display:!1,filter:!1}}],ze=({displayData:t,title:n,url:d,isCampus:r=!1})=>{const o=se(),{students:s,allStudents:u,fromDate:C,toDate:I,allStatusCount:Pe}=le(e=>e.campus),f=ie(),U=()=>f(Fe(!1)),R=e=>f(we(e)),W=e=>f(Ie(Y(e).format("YYYY-MM-DD"))),q=e=>f(Te(Y(e).format("YYYY-MM-DD"))),K=e=>f(Ae(e)),v=e=>f(Ce(e)),H=e=>f(Oe(e)),X=()=>f(xe()),[Z,G]=w.useState(!0),J=e=>{if(r){const p=B.reduce((c,l)=>({...c,[l]:0}),{total:0}),h=e.reduce((c,l)=>(l.stage.campus_status&&B.includes(l.stage.campus_status)&&(c[l.stage.campus_status]+=1),c),p);h.total=e.length,K(h)}const m=e.map(p=>De(p,r));v(m),H(m),G(!1)},F=async e=>{try{const m=Le+d,p=await be.get(m,{signal:e,params:{from:C,to:I}}),h={},c=p.data.data.map(l=>{const b=l.lastTransition?l.lastTransition.to_stage:"other",y=l.contacts[l.contacts.length-1];return h[b]?h[b]+=1:h[b]=1,{...l,qualification:ve[l.qualification],altNumber:y&&y.alt_mobile,donor:l.studentDonor?l.studentDonor:null}});c.length>0&&(c[0]={...c[0],...h}),J(c)}catch{U()}};oe.exports.useEffect(()=>{const e=new AbortController;return(async()=>await F(e.signal))(),()=>{e.abort(),v([]),X()}},[]);const Q=async e=>{W(e),F()},V=e=>{q(e),F()},ee=e=>{const m=u.filter(p=>p.stage===e);v(m)},T=async e=>{R(e),ee(e.label)},ae=o.pathname.split("/")[1],A=parseInt(o.pathname[o.pathname.length-1],10),te=(e,m,p,h)=>{const c=h.map(({data:l})=>({data:l.map((b,y)=>{var k;switch(((k=t[y])==null?void 0:k.name)||"DEFAULT"){case"enrolmentKey":return{onlineTest:"Online Test",offlineTest:"Offline Test","N/A":"N/A"}[b[b.length-1].type_of_test];default:return b}})}));return`\uFEFF${e(p)}${m(c)}`};w.useCallback(()=>a("tbody",{}),[]);const O=i(g,{container:!0,spacing:4,sx:{paddingY:"0.8rem"},children:[a(g,{item:!0,xs:12,md:6,lg:3,children:a(L,{onChange:T,options:A?E:z,placeholder:"Filter Stage",isClearable:!0,closeMenuOnSelect:!0,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})}})}),a(g,{item:!0,xs:12,md:6,lg:3,children:a(j,{dateAdapter:M,children:a(P,{margin:"dense",style:{marginLeft:16,maxWidth:"40%"},value:C,id:"date-picker-dialog",label:"From Date",format:"MM/dd/yyyy",onChange:Q,KeyboardButtonProps:{"aria-label":"change date"},renderInput:e=>a(N,{fullWidth:!0,size:"small",...e})})})}),a(g,{item:!0,xs:12,md:6,lg:3,children:a(j,{dateAdapter:M,children:a(P,{margin:"dense",style:{marginLeft:16,maxWidth:"40%"},value:I,id:"date-picker-dialog",label:"To Date",format:"MM/dd/yyyy",onChange:V,KeyboardButtonProps:{"aria-label":"change date"},renderInput:e=>a(N,{size:"small",fullWidth:!0,...e})})})})]}),ne=u.length>0&&a(g,{container:!0,spacing:3,sx:{paddingY:"0.8rem"},children:a(g,{item:!0,container:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%"},children:a(L,{onChange:T,options:A?E:z,placeholder:"Filter Stage",isClearable:!0,closeMenuOnSelect:!0,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999})}})})});return i(re,{sx:{paddingX:"1.2rem",paddingY:"0.2rem"},children:[ae==="campus"?ne:O,a(Se,{tableBodyMaxHeight:"56vh",title:n,columns:[...t,...je],onDownload:te,data:s,showLoader:Z,options:O})]})},Me=ce(()=>({container:{display:"flex",alignItems:"center",flexDirection:"column"},space:{marginBottom:10}})),Ee=({name:t,progressMade:n,studentData:d,overview:r,showGraphData:o,selected:s})=>{const u=Me();return i(de,{className:u.container,children:[a(g,{item:!0,xs:12,className:u.space,children:i(S,{variant:"h4",children:[" ",t]})}),a(g,{item:!0,xs:12,className:u.space,children:i(ue,{size:"large",color:"primary","aria-label":"large outlined primary button group",children:[r&&a(x,{variant:s==="overview"?"contained":"outlined",onClick:()=>r.action(),children:r==null?void 0:r.label}),a("div",{}),a(x,{variant:s==="studentData"?"contained":"outlined",onClick:()=>d.action(),children:d==null?void 0:d.label}),a(x,{variant:s==="progressMade"?"contained":"outlined",onClick:()=>n.action(),children:n==null?void 0:n.label}),a(x,{variant:s==="showGraphData"?"contained":"outlined",onClick:()=>o.action(),children:o==null?void 0:o.label})]})})]})},$=t=>{let n="";t.status!=null&&(n=(t.status.charAt(0).toUpperCase()+t.status.slice(1)).split(/(?=[A-Z])/).join(" "));const d=location.pathname.split("/")[1];return i("center",{children:[i("div",{style:{fontSize:15,fontFamily:"Arial",display:"flex"},children:[d==="campus"?a(ke,{isShow:!0,studentName:t.name,studentId:t.id,dataType:"columnTransition"}):t.name," ",":",t.mobile?t.mobile:t.contacts[0].mobile]}),t.status!=null?i("span",{style:{fontSize:15,fontWeight:500},children:["(",n,")"]}):a("span",{children:t.status})]},`${t.name}${Math.random()}`)},$e=t=>{const[n,d]=w.useState(!1),r=()=>{d(C=>!C)},{classes:o,details:s,stage:u}=t;return s.length?i("div",{children:[i(_,{children:[a("center",{children:i(S,{variant:"h6",children:[D[u],"(",s.length,")"]})}),s.length>0&&!n&&s.slice(0,10).map($),s.length>0&&n&&s.map($)]}),a(me,{disableSpacing:!0,children:s.length>10&&a(pe,{className:he(o.expand,{[o.expandOpen]:n}),onClick:r,"aria-expanded":n,"aria-label":"show more",children:n?i("div",{children:[a(S,{children:"See Less"}),a(fe,{className:o.expandOpen,color:"primary"})]}):i("div",{children:[a(S,{children:"See More"}),a(ge,{className:o.expandOpen,color:"primary"})]})})})]}):i(_,{children:[a("center",{children:i(S,{variant:"h6",children:[D[u],"(",s.length,")"]})}),s.length===0&&a("center",{children:a("p",{style:{fontSize:15,color:"red"},children:"No record Found"})})]})};export{$e as C,ze as D,Ee as S};

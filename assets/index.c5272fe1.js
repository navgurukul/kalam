import{aG as _,aK as M,b9 as st,dw as at,bi as it,ca as nt,bh as q,r,bg as ot,ba as d,bb as rt,aS as s,bc as lt,dx as ct,br as T,dy as B,dz as C}from"./vendor.5ff35c24.js";import{a as p}from"./vendor_axios.5abceb0c.js";import{u as mt}from"./vendor_react_hook_form.99ff4ff5.js";import{L,J as ut,K as f,G as dt}from"./index.6e13cccf.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_react_epic_spinners.792a5510.js";import"./vendor_mui_datatables.34fc80b0.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_easy_edit.886afc3d.js";import"./vendor_react_player.223b9460.js";const _t=_.lazy(()=>M(()=>import("./index.38f32d63.js"),["assets/index.38f32d63.js","assets/vendor.5ff35c24.js","assets/vendor.e8bc3cfc.css","assets/vendor_core_js_pure.7f605738.js","assets/vendor_react_hook_form.99ff4ff5.js","assets/index.6e13cccf.js","assets/index.7dbdc670.css","assets/vendor_axios.5abceb0c.js","assets/vendor_react_epic_spinners.792a5510.js","assets/vendor_mui_datatables.34fc80b0.js","assets/vendor_lodash.dde4158d.js","assets/vendor_react_slick.468a9aef.js","assets/vendor_react_easy_edit.886afc3d.js","assets/vendor_react_player.223b9460.js"])),ht=_.lazy(()=>M(()=>import("./index.cfcf83f9.js"),["assets/index.cfcf83f9.js","assets/vendor.5ff35c24.js","assets/vendor.e8bc3cfc.css","assets/vendor_core_js_pure.7f605738.js","assets/vendor_axios.5abceb0c.js","assets/vendor_react_hook_form.99ff4ff5.js","assets/index.6e13cccf.js","assets/index.7dbdc670.css","assets/vendor_react_epic_spinners.792a5510.js","assets/vendor_mui_datatables.34fc80b0.js","assets/vendor_lodash.dde4158d.js","assets/vendor_react_slick.468a9aef.js","assets/vendor_react_easy_edit.886afc3d.js","assets/vendor_react_player.223b9460.js"])),gt=st(a=>({root:{paddingTop:a.spacing(4),paddingBottom:a.spacing(2),display:"flex",flexDirection:"column",textAlign:"center"},container:{maxWidth:500,backgroundColor:a.palette.background.default},spacing:{paddingBottom:a.spacing(.5)},text:{marginTop:a.spacing(.5)},date:{maxWidth:400,paddingTop:a.spacing(-2),paddingBottom:a.spacing(1)}})),wt=()=>{const a=gt(),b=at(),j=it(),N=nt(),{studentData:z,enrollmentKey:k,studentId:V="",partner:o}=q(t=>t.onlineTest),{lang:h}=q(t=>t.ui),{firstName:U,middleName:K,lastName:R,mobileNumber:W}=z||{firstName:null,middleName:null,lastName:null,mobileNumber:null},{register:S,handleSubmit:G,formState:{errors:y},control:x,setValue:J,watch:H,reset:Q}=mt(),[m,pt]=r.exports.useState(!1),[n,P]=r.exports.useState(0),{enqueueSnackbar:u}=ot(),[E,X]=r.exports.useState(!1),[e,g]=r.exports.useState({ProfileImage:"",FirstName:U||"",MiddleName:K||"",email:"",LastName:R||"",whatsapp:W||"",AlternateNumber:"",gender:"",dob:"",gps_lat:"-1",gps_long:"-1",PrevImage:"",district:"",pin_code:"",state:"",city:"",current_status:"",qualification:"",school_medium:"",caste:"",religion:"",math_marks_in10th:"",percentage_in10th:"",math_marks_in12th:"",percentage_in12th:""}),Y=t=>{const i=new FormData;i.append("file",t),p.post(`${f}on_assessment/details/photo/${k}`,i).then(()=>{u("Photo Uploaded Successfully",{variant:"success"})}).catch(()=>{u("Please Provide Valid Image File",{variant:"error"})})},Z=t=>{console.log(t),g({...e,ProfileImage:t}),Y(t)},F={1:"female",2:"male",3:"other"},I=["","obc","scSt","general","others"],O=["","lessThan10th","class10th","class12th","graduate","ba","bcom","mcom","msc","bca","bsc","bba"],w=["","hindu","islam","sikh","jain","christian","others"],$=["","nothing","job","study","other"],A=["","en","other"];r.exports.useEffect(()=>{},[]),r.exports.useEffect(()=>{const t=JSON.parse(window.sessionStorage.getItem("formData"));let i=window.sessionStorage.getItem("formData")||{};Object.keys(i).length>0&&(X(!0),g({...e,PrevImage:t.image_url,FirstName:t.name.split(" ")[0],MiddleName:t.name.split(" ")[1],LastName:t.name.split(" ")[2],email:t.email,whatsapp:t.contacts[0].mobile,AlternateNumber:t.contacts[1]&&t.contacts[1].alt_mobile,dob:t.dob,gender:F[t.gender],district:t.district,pin_code:t.pin_code,state:t.state,city:t.city,current_status:$[t.current_status],qualification:O[t.qualification],school_medium:A[t.school_medium],caste:I[t.caste],religion:w[t.religon],math_marks_in10th:t.math_marks_in10th,percentage_in10th:t.percentage_in10th,math_marks_in12th:t.math_marks_in12th,percentage_in12th:t.percentage_in12th}),Q({PrevImage:t.image_url,FirstName:t.name.split(" ")[0],MiddleName:t.name.split(" ")[1],LastName:t.name.split(" ")[2],email:t.email,whatsapp:t.contacts[0].mobile,AlternateNumber:t.contacts[1]&&t.contacts[1].alt_mobile,dob:t.dob,gender:F[t.gender],district:t.district,pin_code:t.pin_code,state:t.state,city:t.city,current_status:$[t.current_status],qualification:O[t.qualification],school_medium:A[t.school_medium],caste:I[t.caste],religion:w[t.religon],math_marks_in10th:t.math_marks_in10th,percentage_in10th:t.percentage_in10th,math_marks_in12th:t.math_marks_in12th,percentage_in12th:t.percentage_in12th}))},[]);const l=(()=>[{en:"Basic Details",hi:"\u092C\u0941\u0928\u093F\u092F\u093E\u0926\u0940 \u091C\u093E\u0928\u0915\u093E\u0930\u0940",ma:"\u092E\u0942\u0932\u092D\u0942\u0924 \u092E\u093E\u0939\u093F\u0924\u0940"},{en:"Other Details",hi:"\u0905\u0928\u094D\u092F \u091C\u093E\u0928\u0915\u093E\u0930\u0940",ma:"\u0907\u0924\u0930 \u092E\u093E\u0939\u093F\u0924\u0940"}])(),D=t=>{const i={name:t.name,email:t.email,whatsapp:t.whatsapp,dob:t.dob,gender:t.gender,gps_lat:t.gps_lat,gps_long:t.gps_long,partner_refer:t.partner_refer,qualification:t.qualification,state:t.state,district:t.district,city:t.city,current_status:t.current_status,school_medium:t.school_medium,pin_code:t.pin_code,caste:t.caste,religon:t.religion,percentage_in10th:t.percentage_in10th?t.percentage_in10th:"",math_marks_in10th:t.math_marks_in10th,math_marks_in12th:t.math_marks_in12th,percentage_in12th:t.percentage_in12th?t.percentage_in12th:""};t.alt_mobile&&(i.alt_mobile=t.alt_mobile),m?p.put(`${f}students/updateDetails/${V}`,{gender:t.gender,gps_lat:t.gps_lat,gps_long:t.gps_long,partner_refer:t.partner_refer,qualification:t.qualification,state:t.state,district:t.district,city:t.city,current_status:t.current_status,school_medium:t.school_medium,pin_code:t.pin_code,caste:t.caste,religon:t.religion,percentage_in10th:"string",math_marks_in10th:0,percentage_in12th:"string",math_marks_in12th:0}).then(()=>{N("/test/finalinstruction/",{})}):p.post(`${f}on_assessment/details/${k}`,i).then(c=>{j(dt(c.data.details.id)),N("/test/finalinstruction/",{})}).catch(()=>{u("Please fill all the fields properly",{variant:"error"})})},v=(t,i)=>{if(i.preventDefault(),g(c=>({...c,...t})),n===0&&!e.PrevImage&&!e.ProfileImage){u("Please provide a Profile Picture",{variant:"error"});return}if(n>=l.length-1){D({name:`${t.FirstName} ${t.MiddleName} ${t.LastName}`,alt_mobile:t.AlternateNumber,partner_refer:"NONE",image_url:e.ProfileImage,gps_lat:e.gps_lat?e.gps_lat:"",gps_long:e.gps_long?e.gps_lat:"",math_marks_in10th:e.math_marks_in10th?e.math_marks_in10th:"",math_marks_in12th:e.math_marks_in12th?e.math_marks_in12th:"",...t});return}P(c=>c+1)},tt=()=>{P(t=>t-1)},et=t=>{switch(t){case 0:return s(_.Suspense,{fallback:s(L,{}),children:s(_t,{lang:h,formData:e,reactForm:{register:S,errors:y,control:x},inputDisabled:m||E,pfpCompulsion:!ut.includes(o==null?void 0:o.slug),setProfileImage:Z})});case 1:return s(_.Suspense,{fallback:s(L,{}),children:s(ht,{formData:{name:`${e.FirstName} ${e.MiddleName} ${e.LastName}`,alt_mobile:e.AlternateNumber,partner_refer:"NONE",image_url:e.ProfileImage,...e},reactForm:{register:S,errors:y,control:x,watch:H,setValue:J},lang:h,alreadyAUser:m,partnerSlug:o==null?void 0:o.slug,inputDisabled:m||E})});default:return s("div",{})}};return d(rt,{className:a.root,maxWidth:"sm",children:[s(lt,{variant:"h5",className:a.text,children:l[n][h]}),d("form",{style:{paddingTop:"2.0rem"},noValidate:!0,onSubmit:G(v),children:[et(n),s(ct,{style:{marginTop:"1.6rem"},variant:"dots",position:"static",steps:l.length,activeStep:n,nextButton:d(T,{size:"medium",type:"submit",variant:n===l.length-1?"contained":"text",color:"primary",children:[n===l.length-1?"Submit Data":"Next",b.direction==="rtl"?s(B,{}):s(C,{})]}),backButton:d(T,{size:"medium",onClick:tt,disabled:n===0,children:[b.direction==="rtl"?s(C,{}):s(B,{}),"Back"]})})]})]})};export{wt as default};

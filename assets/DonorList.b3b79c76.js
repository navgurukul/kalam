import{bh as x,bi as D,aG as g,r as w,aS as i,bb as y,b$ as L}from"./vendor.5ff35c24.js";import{a as R}from"./vendor_axios.5abceb0c.js";import{M as S,c as N}from"./index.6e13cccf.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_react_epic_spinners.792a5510.js";import"./vendor_mui_datatables.34fc80b0.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_easy_edit.886afc3d.js";import"./vendor_react_player.223b9460.js";const $="https://join.navgurukul.org/api/",j=[{name:"id",label:"S.No",options:{filter:!0,sort:!0,customBodyRender:(s,e)=>e.rowIndex+1}},{name:"donor",label:"Name",options:{filter:!0,sort:!0,customBodyRender:(s,e)=>{const a=`/donor/${e.rowData[0]}/students`;return i(L,{to:a,style:{color:"#f05f40"},children:s})}}}],G=()=>{const{roles:s}=x(o=>o.auth),e=D(),n=()=>e(N(!1)),[a,l]=g.useState({data:[],showLoader:!0}),u=async o=>{var c;try{const r=s.find(t=>t.role==="Donor"),f=((c=r==null?void 0:r.access)==null?void 0:c.map(t=>t.access))||[],h=`${$}donors`,d=await R.get(h,{signal:o}),b=s.findIndex(t=>t.role==="Admin");l({...a,data:b!==-1?d.data:d.data.filter(t=>f.includes(t.id)),showLoader:!1})}catch{}};w.exports.useEffect(()=>{const o=new AbortController;return(async()=>u(o.signal))(),n(),()=>o.abort()},[]);const{data:m,showLoader:p}=a;return i(y,{maxWidth:"sm",children:i(S,{title:"Donors Name",columns:j,data:m,showLoader:p})})};export{G as default};

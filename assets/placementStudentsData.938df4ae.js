import{bg as F,aS as t,aG as d,bF as v,cm as ee,cn as te,co as ne,bs as $,br as B,bD as w,b9 as ae,ba as l,cq as M,bU as W,be as I,aU as J,ci as U,bh as ie,bi as se,bn as le,bo as de,bp as ce,bu as x,bv as V,by as ue,bz as re,bA as P,bc as Y,cr as H,bq as pe,bj as fe,aT as G,dj as S,ch as me,bk as be,r as he}from"./vendor.5ff35c24.js";import{a as T}from"./vendor_axios.5abceb0c.js";import{M as oe,c as K,U as q,p as Q,q as X}from"./index.cb0640cd.js";import{E as ye}from"./vendor_react_easy_edit.886afc3d.js";import{H as ke}from"./vendor_react_epic_spinners.792a5510.js";import{u as ge,C as E}from"./vendor_react_hook_form.99ff4ff5.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_mui_datatables.34fc80b0.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_player.223b9460.js";const De="https://join.navgurukul.org/api/",R=({name:m,label:k,type:C,value:j,id:L,studentId:b,change:y})=>{const{enqueueSnackbar:g}=F(),c=h=>{if(h===""){g(`${m} cannot be empty`,{variant:"error"});return}h!==j&&T.put(`${De}students/jobDetails/${L}`,{[m]:h,student_id:b}).then(()=>{g(`${k} successfully updated !`,{variant:"success"}),y({[m]:h})}).catch(()=>{g(`Error in updating ${k}`,{variant:"error"})})};return t(ye,{type:C,placeholder:"Click to Add",value:j,onSave:h=>c(h),saveButtonLabel:"\u2714",cancelButtonLabel:"\u2716",onValidate:h=>h!=="",disableAutoCancel:!0})},_e="https://join.navgurukul.org/api/",Le=({offerLetterDate:m,id:k,studentId:C,change:j})=>{const{enqueueSnackbar:L}=F(),[b,y]=d.useState(!1);return t(v,{sx:{minWidth:"10rem"},children:b?t(ee,{dateAdapter:te,children:t(ne,{disableFuture:!0,id:"offer_letter_date",label:"Date of Offer Letter",value:m,onChange:c=>{w(c).diff(m,"date")!==0&&T.put(`${_e}students/jobDetails/${k}`,{offer_letter_date:c,student_id:C}).then(()=>{L(`${name} successfully updated !`,{variant:"success"}),j({offer_letter_date:c}),y(!1)}).catch(()=>{L(`Error in updating ${name}`,{variant:"error"})})},inputFormat:"dd/MM/yyyy",inputVariant:"outlined",renderInput:c=>t($,{fullWidth:!0,...c}),fullWidth:!0,placeholder:"Date of Offer Letter"})}):t(B,{variant:"text",size:"small",color:"inherit",onClick:()=>y(!0),children:w(m).isValid()?w(m).format("D MMM YYYY"):"Click to Add"})})},je=()=>({top:`${50}%`,left:`${50}%`,transform:`translate(-${50}%, -${50}%)`,overflowY:"scroll",maxHeight:"90vh",width:"90%"}),Ce=ae(m=>({paper:{position:"absolute",marginLeft:"3vw",marginRight:"3vw",width:"94vw",[m.breakpoints.up("md")]:{margin:"auto",width:"50%"},backgroundColor:m.palette.background.paper,boxShadow:m.shadows[5],padding:m.spacing(4),outline:"none"},overrides:{MUIDataTableBodyCell:{root:{minHeight:"22px"}}},transitionIcon:{transform:"rotate(-180deg)"}})),xe=({studentName:m,studentTransitions:k,modalOpen:C,closeModal:j})=>{const L=Ce(),[b,y]=d.useState(null),g=[{name:"id",label:"Actions",options:{display:!1,viewColumns:!1,filter:!1}},{name:"employer",label:"Employer",options:{filter:!1}},{name:"job_designation",label:"Designation"},{name:"job_location",label:"Job Location"},{name:"salary",label:"Salary",options:{customBodyRender:d.useCallback(c=>{const h=c||"N/A",D=h==="N/A"?"N/A":h*12;return l("div",{style:{display:"flex",flexDirection:"column"},children:[l("div",{style:{display:"flex",flexDirection:"row"},children:[D==="N/A"?"":"\u20B9",D==="N/A"?"Click to Add":`${h}`,D==="N/A"?"":"/month"]}),D==="N/A"?null:l("div",{children:["\u20B9",`${D}`,"/annum"]})]})},[])}},{name:"job_type",label:"Job Type"},{name:"offer_letter_date",label:"Offer Letter Date",options:{filter:!1,sort:!1,customBodyRender:d.useCallback(c=>{const h=w(c).format("D MMM YYYY");return t("p",{children:h})},[])}},{name:"resume",label:"Resume",options:{filter:!1,customBodyRender:d.useCallback(c=>t(B,{variant:"contained",endIcon:t(M,{}),onClick:()=>y(c),disabled:!c,children:"View"}),[])}},{name:"photo_link",label:"Photo Link",options:{filter:!1,customBodyRender:d.useCallback(c=>t(B,{variant:"contained",endIcon:t(M,{}),onClick:()=>y(c),disabled:!c,children:"View"}),[])}},{name:"video_link",label:"Video Link",options:{filter:!1,customBodyRender:d.useCallback(c=>t(B,{variant:"contained",endIcon:t(M,{}),onClick:()=>y(c),disabled:!c,children:"View"}),[])}}];return t(W,{open:C,onClose:j,children:l(I,{style:je(),className:L.paper,children:[t(I,{sx:{display:"flex",flexDirection:"row-reverse"},children:t(J,{onClick:j,children:t(U,{})})}),t(W,{open:!!b,onClose:()=>y(null),sx:{display:"flex",justifyContent:"center"},children:l(I,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",border:"none",height:"100%"},children:[t(I,{sx:{display:"flex",flexDirection:"row-reverse"},children:t(J,{onClick:()=>y(null),children:t(U,{})})}),t("embed",{type:"text/html",width:"800",height:"600",src:b,frameBorder:"0"})]})}),t(oe,{title:`Transition Data for ${m}`,data:k,columns:g,showLoader:!1})]})})},Z="https://join.navgurukul.org/api/",Se=({studentId:m,studentName:k,dialogOpen:C,updateJobEntry:j,closeDialog:L})=>{const{enqueueSnackbar:b}=F(),{isFetching:y}=ie(r=>r.ui),g=se(),c=()=>g(K(!0)),h=()=>g(K(!1)),{handleSubmit:D,formState:{errors:f},control:A}=ge(),[e,n]=d.useState({employer:"",designation:"",location:"",salary:"",jobType:"selectjobtype",offerLetterDate:"",resume:"",videoLink:"",photoLink:"",writeUp:""}),o=r=>r.size<=1e6,a=async r=>{const s=new FormData;if(!o(r)){b("File size should not exceed 1MB",{variant:"error"});return}return s.append("file",r),await(await T.post(`${Z}/students/resume/documents`,s)).data},i=async r=>{if(y)return;c();const s={student_id:m,job_designation:r.designation,job_location:r.location,salary:r.salary,job_type:r.jobType,employer:r.employer,offer_letter_date:w(r.offerLetterDate).format("YYYY-MM-DD")};r.videoLink!==""&&(s.video_link=r.videoLink),e.resume!==""&&(s.resume=await a(e.resume)),e.photoLink!==""&&(s.photo_link=await a(e.photoLink)),T.post(`${Z}students/jobDetails`,s).then(_=>{b("Added Entry Successfully",{variant:"success"}),h(),j(_.data),L()}).catch(_=>{b("An Error Occurred",{variant:"error"}),h(),console.error(_)})},u=()=>L(),p=[{value:"Internship",label:"Internship"},{value:"Full Time",label:"Full Time"}];return t(v,{children:l(le,{fullWidth:!0,open:C,onClose:u,children:[l(de,{children:["Add New Job Entry for ",k]}),t(ce,{children:l(x,{container:!0,spacing:3,sx:{mt:"0.4rem"},children:[t(x,{item:!0,xs:12,children:t(E,{control:A,defaultValue:e.employer||"",name:"employer",rules:{required:!0,maxLength:40},render:({field:{ref:r,...s}})=>t($,{variant:"outlined",fullWidth:!0,id:"employer",inputRef:r,label:"Employer Name",placeholder:"Employer Name",autoComplete:"off",type:"text",error:!!f.employer,helperText:f.employer?f.employer.type==="maxLength"?"Length should be under 40 characters":"Enter Employer's Name":"",...s})})}),t(x,{item:!0,xs:12,children:t(E,{control:A,defaultValue:e.designation||"",name:"designation",rules:{required:!0,maxLength:40},render:({field:{ref:r,...s}})=>t($,{variant:"outlined",fullWidth:!0,id:"designation",inputRef:r,label:"Job Designation",placeholder:"Job Designation",autoComplete:"off",type:"text",error:!!f.employer,helperText:f.designation?f.designation.type==="maxLength"?"Length should be under 40 characters":"Enter Job Designation":"",...s})})}),t(x,{item:!0,xs:12,children:t(E,{control:A,defaultValue:e.location||"",name:"location",rules:{required:!0,maxLength:40},render:({field:{ref:r,...s}})=>t($,{variant:"outlined",fullWidth:!0,id:"location",inputRef:r,label:"Job Location",placeholder:"Job Location",autoComplete:"off",type:"text",error:!!f.employer,helperText:f.location?f.location.type==="maxLength"?"Length should be under 40 characters":"Enter Job Location":"",...s})})}),t(x,{item:!0,xs:12,children:t(E,{control:A,defaultValue:e.salary||"",name:"salary",rules:{required:!0,maxLength:40},render:({field:{ref:r,...s}})=>t($,{variant:"outlined",fullWidth:!0,id:"salary",inputRef:r,label:"Job Salary/Stipend",placeholder:"Job Salary/Stipend",autoComplete:"off",type:"text",error:!!f.salary,helperText:f.salary?f.salary.type==="maxLength"?"Length should be under 40 characters":"Enter Job Salary/Stipend":"",...s})})}),l(x,{item:!0,xs:6,children:[t(E,{control:A,rules:{required:!0,validate:r=>r!=="selectjobtype"},name:"jobType",defaultValue:e.jobType,render:({field:{ref:r,...s}})=>l(V,{variant:"outlined",fullWidth:!0,children:[t(ue,{id:"jobType-label",children:"Select Job Type"}),l(re,{label:"Select Job Type",error:!!f.jobType,id:"jobType",inputRef:r,placeholder:"Select Job Type",required:!0,...s,children:[t(P,{value:"selectjobtype",disabled:!0,children:"Select Job Type"}),p.map(_=>t(P,{value:_.value,children:_.label},_.value))]})]})}),f.jobType?t(Y,{style:{paddingLeft:"0.8rem",paddingTop:"0.4rem",paddingBottom:"0.4rem"},variant:"caption",color:"error",children:"Please specify Job Type"}):""]}),t(x,{item:!0,xs:6,children:t(E,{control:A,name:"offerLetterDate",defaultValue:e.offerLetterDate?e.offerLetterDate:null,rules:{required:!0},render:({field:{ref:r,...s},fieldState:{isTouched:_}})=>t(ee,{dateAdapter:te,children:t(ne,{disableFuture:!0,id:"offerLetterDate",label:"Date of Offer Letter",required:!0,inputRef:r,focused:_,inputFormat:"dd/MM/yyyy",inputVariant:"outlined",renderInput:N=>t($,{fullWidth:!0,...N,error:!!f.offerLetterDate,helperText:f.offerLetterDate?"Enter Date of Birth":""}),fullWidth:!0,placeholder:"Date of Offer Letter",error:!!f.offerLetterDate,...s})})})}),t(x,{item:!0,xs:6,children:l(V,{variant:"outlined",fullWidth:!0,children:[t("label",{id:"resume-label",children:t(Y,{variant:"caption",children:"Upload Resume"})}),t(H,{inputProps:{type:"file",accept:"image/*,.pdf"},id:"resume",fullWidth:!0,name:"resume",type:"file",onChange:r=>n({...e,resume:r.target.files[0]})})]})}),t(x,{item:!0,xs:6,children:l(V,{variant:"outlined",fullWidth:!0,children:[t("label",{id:"photoLink-label",children:t(Y,{variant:"caption",children:"Upload Photo"})}),t(H,{inputProps:{type:"file",accept:"image/*,.pdf"},type:"file",id:"photoLink",fullWidth:!0,name:"photoLink",onChange:r=>n({...e,photoLink:r.target.files[0]})})]})}),t(x,{item:!0,xs:6,children:t(E,{control:A,defaultValue:e.videoLink||"",name:"videoLink",render:({field:{ref:r,...s}})=>t($,{variant:"outlined",fullWidth:!0,id:"videoLink",inputRef:r,label:"Video Link",placeholder:"Video Link",autoComplete:"off",type:"text",error:!!f.videoLink,helperText:f.videoLink?f.videoLink.type==="maxLength"?"Length should be under 40 characters":"Enter Video Link":"",...s})})})]})}),l(pe,{children:[t(B,{variant:"outlined",color:"primary",onClick:u,children:"Cancel"}),t(B,{variant:"contained",color:"primary",onClick:D(i),children:y?t(ke,{size:24}):"Add New Entry"})]})]})})},O="https://join.navgurukul.org/api/",Fe=()=>{const{enqueueSnackbar:m}=F(),[k,C]=d.useState([]),[j,L]=d.useState(!0),[b,y]=d.useState({studentId:null,studentName:null}),g=e=>`${O}students/jobDetails/${e}`,c=async()=>{try{const e=await T.get(`${O}students/jobDetails`);C(e.data)}catch(e){console.error(e)}},h=(e,n,o,a)=>{T.put(`${O}students/jobDetails/${n}`,{student_id:o,job_type:e}).then(()=>{m("Job Type successfully updated !",{variant:"success"}),a({job_type:e})}).catch(()=>{m("Error in updating Job Type",{variant:"error"})})},D=[{name:"student_id",label:"Actions",options:{display:!0,viewColumns:!0,filter:!1,sort:!1,customBodyRender:d.useCallback((e,{rowData:n,rowIndex:o})=>l(fe,{children:[t(G,{title:"Add New Entry",placement:"top",children:t(J,{onClick:()=>{y({action:"addNewEntry",studentId:e,studentName:n[1],rowIndex:o})},children:t(S,{fontSize:"medium"})})}),t(G,{title:"View Transitions",placement:"top",children:t(J,{color:"primary",onClick:()=>{y({action:"viewTransition",studentId:e,studentName:n[1],transitions:k[o].student_job_details_all})},children:t(me,{sx:{transitionIcon:{transform:"rotate(-180deg)"}}})})})]}),[k])}},{name:"name",label:"Name",options:{filter:!1,sort:!0}},{name:"joinDate",label:"Date of Joining",options:{filter:!1,sort:!0,customBodyRender:d.useCallback(e=>t("p",{children:w(e).isValid()?w(e).format("D MMM YYYY"):"N/A"}),[])}},{name:"partner",label:"Partner",options:{filter:!1,sort:!1,customBodyRender:d.useCallback(e=>{const n=e==null?void 0:e.name;return t("p",{children:n})})}},{name:"qualification",label:"Qualification",options:{filter:!1,sort:!1,customBodyRender:d.useCallback(e=>{const n=e&&X[e];return t("p",{children:n})})}},{name:"campus",label:"Campus",options:{filter:!1,sort:!1,customBodyRender:d.useCallback(e=>{var o;const n=e&&((o=e[0])==null?void 0:o.campus);return t("p",{children:n})})}},{name:"student_job_details",label:"Resume",key:"resume",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=n.rowData[0];return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):t(q,{name:"resume",label:"Resume",update:async(i,u)=>T.put(g(e==null?void 0:e.id),{student_id:a,[i]:u}),docLink:e==null?void 0:e.resume,change:i=>o({...e,...i})})},[])}},{name:"student_job_details",label:"Photo Link",key:"photo_link",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=n.rowData[0];return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):t(q,{name:"photo_link",label:"Photo Link",update:async(i,u)=>T.put(g(e==null?void 0:e.id),{student_id:a,[i]:u}),docLink:e==null?void 0:e.photo_link,change:i=>o({...e,...i})})},[])}},{name:"student_job_details",label:"Video Link",key:"video_link",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=n.rowData[0];return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):t(q,{name:"video_link",label:"Video Link",update:async(i,u)=>T.put(g(e==null?void 0:e.id),{student_id:a,[i]:u}),isVideo:!0,docLink:e==null?void 0:e.video_link,change:i=>o({...e,...i})})},[])}},{name:"studentDonor",label:"Donor",options:{filter:!1,sort:!1,customBodyRender:d.useCallback(e=>Q.filter(o=>{var a;return(a=e==null?void 0:e.donor_id)==null?void 0:a.includes(`${o.id}`)}).map(o=>t(be,{sx:{m:"0.4rem"},variant:"filled",label:o.name},o.id)),[])}},{name:"gender",label:"Gender",options:{display:!1,filter:!1,sort:!1,customBodyRender:d.useCallback(e=>t("p",{children:e===1?"Female":e===2?"Male":"Transgender"}),[])}},{name:"email",label:"Email",options:{filter:!1,sort:!0}},{name:"contacts",label:"Contact",options:{filter:!1,sort:!1,customBodyRender:d.useCallback(e=>{var o;const n=e&&((o=e[0])==null?void 0:o.mobile);return t("p",{children:n})},[])}},{name:"student_job_details",label:"Date of Offer Letter",key:"offer_letter_date",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=n.rowData[0],i=e!=null&&e.offer_letter_date?w(e.offer_letter_date):null;return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):t(Le,{offerLetterDate:i,id:e==null?void 0:e.id,studentId:a,change:o})},[])}},{name:"student_job_details",label:"Job Designation",key:"job_designation",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=(e==null?void 0:e.job_designation)||"Click to Add",i=n.rowData[0];return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):t(R,{name:"job_designation",label:n.columnData.label,type:"text",id:e==null?void 0:e.id,value:a,change:u=>o(u),studentId:i})},[])}},{name:"student_job_details",label:"Job Location",key:"job_location",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=n.rowData[0],i=(e==null?void 0:e.job_location)||"Click to Add";return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):t(R,{name:"job_location",label:n.columnData.label,type:"text",id:e==null?void 0:e.id,value:i,change:u=>o(u),studentId:a})},[])}},{name:"student_job_details",label:"Job Type",key:"job_type",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a={value:"selectJobType",label:"Select Job Type"},i=(e==null?void 0:e.job_type)||a.value,u=n.rowData[0],p=i==="Internship"?{value:"Internship",label:"Internship"}:i==="Full Time"?{value:"Full Time",label:"Full Time"}:a,r=[{value:"Internship",label:"Internship"},{value:"Full Time",label:"Full Time"}];return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):l(re,{variant:"outlined",placeholder:"Select Job Type",value:p.value,onChange:s=>h(s.target.value,e==null?void 0:e.id,u,o),children:[t(P,{value:a.value,disabled:!0,children:a.label}),r.map(s=>t(P,{value:s.value,children:s.label},s.value))]})},[])}},{name:"student_job_details",label:"Salary",key:"salary",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=n.rowData[0],i=(e==null?void 0:e.salary)||"N/A",u=i==="N/A"?"N/A":i*12;return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):l("div",{style:{display:"flex",flexDirection:"column"},children:[l("div",{style:{display:"flex",flexDirection:"row"},children:[u==="N/A"?"":"\u20B9",t(R,{name:"salary",label:n.columnData.label,type:"text",id:e==null?void 0:e.id,value:u==="N/A"?"Click to Add":`${i}`,change:p=>o(p),studentId:a}),u==="N/A"?"":"/month"]}),u==="N/A"?null:l("div",{children:["\u20B9",`${u}`,"/annum"]})]})},[])}},{name:"student_job_details",label:"Employer",key:"employer",options:{filter:!1,sort:!1,customBodyRender:d.useCallback((e,n,o)=>{const a=(e==null?void 0:e.employer)||"Click to Add",i=n.rowData[0];return Object.keys(e).length===0||e.id===void 0?l("div",{children:["Press ",t(S,{fontSize:"8"})," to Add New Entry"]}):t(R,{name:"employer",label:n.columnData.label,type:"text",id:e==null?void 0:e.id,value:a,change:u=>o(u),studentId:i})},[])}}];he.exports.useEffect(()=>{(async()=>(L(!0),await c(),L(!1)))()},[]);const f=(e,n)=>{const o=[...k],a=o[e];a.student_job_details_all.push(n),a.student_job_details=n,o[e]=a,C(o)};return l(I,{sx:{paddingX:"1.2rem",paddingY:"0.4rem"},children:[t(oe,{title:"Placement Data",data:k,columns:D,onDownload:(e,n,o,a)=>{const i=a.map(({data:u})=>({data:u.map((p,r)=>{var s,_;switch(D[r].name){case"partner":return(p==null?void 0:p.name)||"";case"campus":return((s=p[0])==null?void 0:s.campus)||"";case"joinDate":return w(p).format("D MMM YYYY");case"student_job_details":return D[r].label==="Date of Offer Letter"?w(p[D[r].key]).format("D MMM YYYY"):p[D[r].key];case"gender":return p===1?"Female":p===2?"Male":"Transgender";case"studentDonor":return`${((_=Q)==null?void 0:_.filter(N=>{var z;return(z=p==null?void 0:p.donor_id)==null?void 0:z.includes(`${N.id}`)}).map(N=>N.name).join(","))||""}`;case"qualification":return X[p];case"contacts":return`${(p==null?void 0:p.map(N=>N.mobile).join(","))||""}`;default:return p}})}));return`\uFEFF${e(o)}${n(i)}`},showLoader:j}),t(Se,{closeDialog:()=>y({action:null,studentId:null,studentName:null}),updateJobEntry:e=>f(b.rowIndex,e),dialogOpen:b.action==="addNewEntry",studentId:b.studentId,studentName:b.studentName}),t(xe,{studentId:b.studentId,studentTransitions:b.transitions,studentName:b.studentName,modalOpen:b.action==="viewTransition",closeModal:()=>y({studentId:null,studentName:null})})]})};export{Fe as default};

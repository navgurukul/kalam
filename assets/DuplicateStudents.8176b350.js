import{bg as L,ca as A,bi as P,bh as z,aG as g,bG as M,aS as l,br as I,r as N,ba as Y,bj as q,bc as O}from"./vendor.5ff35c24.js";import{M as U}from"./vendor_mui_datatables.34fc80b0.js";import{a as m}from"./vendor_axios.5abceb0c.js";import{E as W,F as H,G as J,b as F,c as $}from"./index.cb0640cd.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_epic_spinners.792a5510.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_easy_edit.886afc3d.js";import"./vendor_react_player.223b9460.js";const f="https://join.navgurukul.org/api/",Q=({studentId:n,stage:a})=>{const[u,o]=g.useState(null),i=A(),h=a==="pendingEnglishInterview"||a==="pendingCultureFitInterview"||a==="pendingAlgebraInterview"||a==="interviewScheduled"||a==="interviewFailed";return N.exports.useEffect(()=>{(async()=>{var c,s;try{const r=(s=(c=(await m.get(`${f}slot/interview/${n}`)).data)==null?void 0:c.data)==null?void 0:s[0];o(r&&!r.is_cancelled)}catch{o(!1)}})()},[n]),l(I,{disabled:!h,variant:"contained",style:{fontSize:"10px",backgroundColor:u?"#4caf50":void 0,color:u?"white":void 0},onClick:()=>{i({pathname:`/bookSlot/${n}`})},children:u?"Booked":"Book Slot"})},V=(n,a)=>{const u=a.rowData[0],o=a.rowData[1];return l(Q,{studentId:u,stage:o})},re=()=>{const{enqueueSnackbar:n}=L(),a=A(),u=P(),o=()=>u($(!0)),i=()=>u($(!1)),{lang:h}=z(e=>e.ui),[D,c]=g.useState(null),[s,w]=g.useState({data:[],pendingInterviewStage:"checking"}),{search:r}=M(),b=r.split("=")[1].split("&")[0],S=r.split("=")[2].split("&")[0],x=async e=>{try{const t=`0${S}`;o();const k=await m.get(`${f}helpline/register_exotel_call`,{params:{ngCallType:"getEnrolmentKey",From:t,partner_id:D,student_id:e}});return i(),k}catch(t){throw n("Something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),i(),Error(t.message)}},C=[{name:"id",label:"Re-Test",options:{filter:!1,customBodyRender:g.useCallback((e,t)=>l(I,{disabled:t.rowData[1]==="pendingEnglishInterview"||t.rowData[1]==="pendingCultureFitInterview"||t.rowData[1]==="pendingAlgebraInterview",variant:"contained",color:"primary",style:{fontSize:"10px"},onClick:async()=>{const k=await x(e),[G,j,K]=b.split("_");u(W({firstName:G,middleName:j,lastName:K,mobileNumber:S})),u(H(k.data.key)),u(J(e)),a("/test/instructions"),i()},children:"Re-Test"}),[])}},{name:"stage",label:"Stage",options:{filter:!1,customBodyRender:e=>F[e]}},{name:"stage",label:"Book Slot",options:{filter:!1,customBodyRender:V}},{name:"total_marks",label:"Marks",options:{filter:!1,customBodyRender:(e,t)=>t.rowData[1]==="enrolmentKeyGenerated"&&e===null?"Last Test Not Submitted":e}},{name:"key",label:"Key",options:{filter:!1,display:!1,viewColumns:!1}}],E={stageMessage:{en:`Your ${F[s.pendingInterviewStage]} is still pending. You\u2019re not required to give the online test now. We will soon complete your admission process.`,hi:`\u0906\u092A\u0915\u093E ${F[s.pendingInterviewStage]} \u0905\u092D\u0940 \u092D\u0940 \u091A\u0932 \u0930\u0939\u093E \u0939\u0948\u0902\u0964 \u0905\u092D\u0940 \u0906\u092A\u0915\u094B \u0911\u0928\u0932\u093E\u0907\u0928 \u092A\u0930\u0940\u0915\u094D\u0937\u093E \u0926\u0947\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094D\u092F\u0915\u0924\u093E \u0928\u0939\u0940\u0902 \u0939\u0948\u0964 \u0939\u092E \u091C\u0932\u094D\u0926 \u0939\u0940 \u0906\u092A\u0915\u0940 \u092A\u094D\u0930\u0935\u0947\u0936 \u092A\u094D\u0930\u0915\u094D\u0930\u093F\u092F\u093E \u092A\u0942\u0930\u0940 \u0915\u0930 \u0926\u0947\u0902\u0917\u0947\u0964`},testFailedMessage:{en:", Your previous attempts were unsuccessful/test failed, please give the 1st stage of the online test again.",hi:", \u0906\u092A\u0915\u0947 \u092A\u093F\u091B\u0932\u0947 \u091F\u0947\u0938\u094D\u091F \u0905\u0938\u092B\u0932 \u0930\u0939\u0947 \u092F\u093E \u0906\u092A \u092A\u093E\u0938 \u0928\u0939\u0940\u0902 \u0939\u094B \u092A\u093E\u090F, \u0915\u0943\u092A\u092F\u093E \u0911\u0928\u0932\u093E\u0907\u0928 \u091F\u0947\u0938\u094D\u091F \u0935\u093E\u092A\u0938 \u0938\u0947 \u0926\u0947\u0964"}},_=()=>{m.get(`${f}check_duplicate`,{params:{Name:b.split("_").join(""),Number:S}}).then(e=>{const t=e.data.data;t.alreadyGivenTest&&w({...s,data:t.data,pendingInterviewStage:t.data[0].stage})})},T=async e=>{try{const t=await m.get(`${f}partners/slug/${e}`);c(t.data.data.id)}catch{a("/notFound")}};N.exports.useEffect(()=>{const e=window.location.href.split("partnerLanding/")[1];e&&T(e),_()},[]);const{data:R}=s,B=h;let d,v="",p;const y=b.split("_");return y.length===3?[d,v,p]=y:[d,p]=y,Y(q,{children:[l(O,{variant:"h5",children:"Student Status"}),l(U,{title:s.pendingInterviewStage==="enrolmentKeyGenerated"||s.pendingInterviewStage==="testFailed"?`${d} ${v} ${p}${E.testFailedMessage[B]}`:`${d} ${v} ${p}${E.stageMessage[B]}`,columns:C,data:R,options:{viewColumns:!1,print:!1,download:!1,exportButton:!0,pageSize:100,selectableRows:"none",rowsPerPage:20,rowsPerPageOptions:[20,40,60],toolbar:!1,filter:!1,responsive:"vertical"}})]})};export{re as default};

import{aS as e,aT as I,aU as N,aV as j,bh as T,aG as u,r as h,bg as U,ba as l,bb as $,bn as A,bp as B,bX as E,bs as W,bq as q,br as F,b$ as M}from"./vendor.5ff35c24.js";import{a as S}from"./vendor_axios.5abceb0c.js";import{M as O}from"./index.6e13cccf.js";import"./vendor_core_js_pure.7f605738.js";import"./vendor_react_epic_spinners.792a5510.js";import"./vendor_mui_datatables.34fc80b0.js";import"./vendor_lodash.dde4158d.js";import"./vendor_react_slick.468a9aef.js";import"./vendor_react_easy_edit.886afc3d.js";import"./vendor_react_player.223b9460.js";const _=({handleOpen:s,disabled:t})=>e(I,{title:"Add new schools",children:e(N,{disabled:t,onClick:s,children:e(j,{})})}),g="https://join.navgurukul.org/api/",z=[{name:"id",label:"S.No",options:{filter:!0,sort:!0,customBodyRender:(s,t)=>t.rowIndex+1}},{name:"name",label:"Schools",options:{filter:!0,sort:!0,customBodyRender:(s,t)=>{const c=`/school/${t.rowData[0]}/school-stages`;return e(M,{to:c,style:{color:"#f05f40"},children:s})}}}],ee=()=>{const{loggedInUser:s,roles:t}=T(o=>o.auth),[r,c]=u.useState([]),[y,x]=u.useState(!0),[C,n]=h.exports.useState(!1),[w,p]=h.exports.useState(""),{enqueueSnackbar:m}=U(),v=async()=>{const o=`${g}school`;await S.post(o,{name:w}).then(i=>{p(""),f(),n(!1),m("School successfully Added !",{variant:"success"})}).catch(()=>{m("Error Please fill the School Name!",{variant:"error"})})},D=()=>{n(!0)},k={selectableRows:"none",responsive:"vertical",filter:!1,customToolbar:u.useCallback(()=>e(_,{handleOpen:D}),[])},f=async()=>{var o;try{const i=t.findIndex(a=>a.role==="Admin"),d=t.find(a=>a.role==="school"),L=((o=d==null?void 0:d.access)==null?void 0:o.map(a=>a.access))||[],R=`${g}school`,b=await S.get(R);c(i!==-1?[...b.data]:[...b.data.data.filter(a=>L.includes(a.id))]),x(!1)}catch{}};return h.exports.useEffect(()=>{(async()=>await f())()},[s]),l($,{maxWidth:"sm",children:[e(O,{title:"School Name",columns:z,data:r,showLoader:y,options:k}),e(A,{fullWidth:!0,open:C,onClose:()=>n(!1),children:l("section",{style:{padding:"0rem 1rem 1rem 1rem"},children:[l(B,{children:[l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("p",{style:{fontSize:"24px"},children:"Create School"}),e(E,{style:{cursor:"pointer"},onClick:()=>n(!1)})]}),e(W,{fullWidth:!0,autoFocus:!0,label:"School Name",placeholder:"Enter School",variant:"outlined",sx:{mt:"0.4rem"},onChange:o=>{p(o.target.value)}})]}),e(q,{style:{display:"flex",justifyContent:"center"},children:e(F,{variant:"contained",color:"primary",style:{width:"94%",padding:".5rem"},onClick:v,children:"Create NEW School"})})]})})]})};export{ee as default};
